<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Manage Users | Freedom Travel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
    }
    #wrapper {
      display: flex;
      min-height: 100vh;
    }
    #sidebar-wrapper {
      min-width: 250px;
      max-width: 250px;
      background-color: #343a40;
      color: #fff;
      padding-top: 20px;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    .sidebar-heading {
      padding: 0.875rem 1.25rem;
      font-size: 1.2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      font-weight: bold;
    }
    .list-group-item {
      background-color: transparent;
      color: rgba(255, 255, 255, 0.8);
      border: none;
      padding: 10px 1.25rem;
      transition: background-color 0.2s, color 0.2s;
    }
    .list-group-item i {
      margin-right: 10px;
    }
    .list-group-item:hover,
    .list-group-item.active {
      background-color: #0d6efd;
      color: white;
      border-radius: 0;
    }
    #page-content-wrapper {
      width: 100%;
      padding: 20px;
    }
    .form-control:focus {
      box-shadow: none;
      border-color: #0d6efd;
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <!-- Sidebar -->
    <div id="sidebar-wrapper">
      <div class="sidebar-heading bg-primary text-white">Admin Panel</div>
      <div class="list-group list-group-flush">
        <a href="admin dashboard.html" class="list-group-item">
          <i class="fas fa-tachometer-alt"></i>Dashboard
        </a>
        <a href="admin manage destinations.html" class="list-group-item">
          <i class="fas fa-globe-europe"></i>Manage Destinations
        </a>
        <a href="admin manage bookings.html" class="list-group-item">
          <i class="fas fa-book-open"></i>Manage Bookings
        </a>
        <a href="admin manage users.html" class="list-group-item active">
          <i class="fas fa-users"></i>Manage Users
        </a>
        <a href="#" class="list-group-item">
          <i class="fas fa-chart-line"></i>Reports
        </a>
        <a href="arun login.html" class="list-group-item mt-5 text-danger">
          <i class="fas fa-sign-out-alt"></i>Logout
        </a>
      </div>
    </div>

    <!-- Main Content -->
    <div id="page-content-wrapper">
      <div class="container-fluid">
        <h1 class="mt-4 mb-4">Manage Users</h1>

        <!-- Add User Form -->
        <div class="card shadow mb-4">
          <div class="card-header bg-white fw-bold">Add New User</div>
          <div class="card-body">
            <form id="userForm" class="row g-3">
              <div class="col-md-4">
                <input type="text" class="form-control" id="name" placeholder="Full Name" required />
              </div>
              <div class="col-md-4">
                <input type="email" class="form-control" id="email" placeholder="Email" required />
              </div>
              <div class="col-md-4">
                <input type="password" class="form-control" id="password" placeholder="Password" required />
              </div>
              <div class="col-12 text-end">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-plus"></i> Add User
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Users Table -->
        <div class="card shadow">
          <div class="card-header bg-white fw-bold">All Registered Users</div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-striped table-hover align-middle">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Password</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody id="userTableBody"></tbody>
              </table>
            </div>
            <p id="noUsers" class="text-center text-muted mt-3">No users found.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const STORAGE_KEY = "users";
    const userForm = document.getElementById("userForm");
    const userTableBody = document.getElementById("userTableBody");
    const noUsers = document.getElementById("noUsers");

    // Default sample users
    const defaultUsers = [
      { name: "John Doe", email: "john@example.com", password: "john123" },
      { name: "Jane Smith", email: "jane@example.com", password: "jane123" },
      { name: "Bob Johnson", email: "bob@example.com", password: "bob123" },
      { name: "Alice Brown", email: "alice@example.com", password: "alice123" },
    ];

    // Get & Save Users
    function getUsers() {
      let users = JSON.parse(localStorage.getItem(STORAGE_KEY));
      if (!users) {
        users = defaultUsers;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
      }
      return users;
    }

    function saveUsers(users) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
    }

    // Load Users
    function loadUsers() {
      const users = getUsers();
      userTableBody.innerHTML = "";

      if (users.length === 0) {
        noUsers.style.display = "block";
        return;
      }
      noUsers.style.display = "none";

      users.forEach((user, index) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${index + 1}</td>
          <td>${user.name}</td>
          <td>${user.email}</td>
          <td>${user.password}</td>
          <td>
            <button class="btn btn-sm btn-danger" onclick="deleteUser(${index})">
              <i class="fas fa-trash"></i> Delete
            </button>
          </td>
        `;
        userTableBody.appendChild(row);
      });
    }

    // Add User
    userForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!name || !email || !password) {
        alert("Please fill out all fields!");
        return;
      }

      const users = getUsers();
      users.push({ name, email, password });
      saveUsers(users);
      loadUsers();
      userForm.reset();
      alert("âœ… User added successfully!");
    });

    // Delete User
    function deleteUser(index) {
      if (confirm("Are you sure you want to delete this user?")) {
        const users = getUsers();
        users.splice(index, 1);
        saveUsers(users);
        loadUsers();
      }
    }

    loadUsers();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
